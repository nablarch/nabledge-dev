# Nabledge ToBe Image

## Overview

このドキュメントは、Nablarch保守開発における**ToBe(Nabledge活用後)の活動イメージ**を示します。

Nabledge活用による開発プロセスの変化を具体的にイメージし、現場での導入検討や優先順位の議論を促進することを目的としています。アクティビティやコマンドの網羅性・正確性よりも、議論のたたき台として活用いただくことを想定しています。

## 人間とAIの役割分担

- **検索 (search)**: Nabledgeが回答を提供。人間は参照のみ。
- **調査/設計 (investigate/design)**: インプットが抽象的・不完全なため、Nabledgeが分析・提案し、人間が詳細化・判断・決定を行う。
- **実装/レビュー (implement/review)**: インプットが具体的・完全なため、Nabledgeが実装・検証を実行可能。人間は最終確認のみ。

## ドキュメント構成

- **Activity Mapping**: 従来の工程・アクティビティに対して、どのNabledgeコマンドが適用可能かを示す
- **成果物・ロール定義**: AsIs/ToBe共通の基礎定義(12種類の成果物分類、5つのロール)
- **Nabledge Commands**: Nabledgeが実行可能な具体的なコマンド体系(search, investigate, design, implement, review)

---

## 1. Activity Mapping with Nabledge

**凡例**: IN=インプット、OUT=アウトプット、IN/OUT=インプット・アウトプット両方

### 1.1 要件定義

| アクティビティ | 説明 | 作業者 | 要件定義書 | 設計書 | 方式設計書 | 開発標準 | 開発ガイド | ソースコード | テスト仕様書/報告書 | テストデータ | 不具合票 | チェックリスト/レビュー結果 | 調査/検証結果 | 工数見積 | **Nabledge** |
|--------------|------|--------|-----------|--------|----------|---------|----------|------------|-----------------|------------|---------|----------------------|--------------|---------|------------|
| 変更要求分析 | 何を変更するか整理 | 要件定義者／設計者 | OUT | - | - | - | - | - | - | - | - | - | - | - | 対象外: 業務要件の整理 |
| 既存機能の影響範囲調査 | 変更により影響を受ける既存機能・設計書・ソースコードの特定 | 要件定義者／設計者 | IN | IN | - | - | - | IN | - | - | - | - | OUT | - | **investigate impact** |
| | 〃 | アーキテクト | IN | - | IN | - | - | IN | - | - | - | - | OUT | - | **investigate impact** |
| 技術的実現可能性検証 | 既存パターンで実装可能か、新規実装が必要かの判断 | アーキテクト | IN | - | IN | - | - | IN | - | - | - | - | OUT | - | **investigate feasibility** |
| 工数見積 | 変更作業の工数を見積もる(技術的複雑さを含む) | 要件定義者／設計者 | IN | IN | - | IN | - | - | - | - | - | - | IN | OUT | **search spec** (技術根拠) |
| | 〃 | アーキテクト | IN | - | IN | IN | - | IN | - | - | - | - | IN | OUT | **search spec** (技術根拠) |

### 1.2 設計

| アクティビティ | 説明 | 作業者 | 要件定義書 | 設計書 | 方式設計書 | 開発標準 | 開発ガイド | ソースコード | テスト仕様書/報告書 | テストデータ | 不具合票 | チェックリスト/レビュー結果 | 調査/検証結果 | 工数見積 | **Nabledge** |
|--------------|------|--------|-----------|--------|----------|---------|----------|------------|-----------------|------------|---------|----------------------|--------------|---------|------------|
| 既存設計書の確認 | 類似機能の設計書を参照 | 要件定義者／設計者 | - | IN | - | - | - | - | - | - | - | - | OUT | - | **investigate impact** |
| | 設計書とソースコードの突き合わせ(引継ぎ・理解) | アプリケーションエンジニア | - | IN | - | - | - | IN | - | - | - | - | OUT | - | **investigate impact** |
| 機能設計 | 画面・バッチ・Webサービス等の詳細設計 | 要件定義者／設計者 | IN | IN/OUT | IN | IN | - | IN | - | - | - | - | - | - | **design draft** + **search pattern** |
| データ設計 | テーブル・項目の追加・変更設計 | データモデラー | IN | IN/OUT | IN | IN | - | IN | - | - | - | - | - | - | 対象外: 業務データモデル |
| 既存パターンの踏襲 | 既存機能の処理パターンに合わせた設計 | 要件定義者／設計者 | - | IN/OUT | IN | IN | - | IN | - | - | - | - | - | - | **search pattern** |
| 整合性チェック | 既存の命名規則・設計パターンとの整合性確認 | 要件定義者／設計者 | - | IN/OUT | IN | IN | - | - | - | - | - | - | - | - | **review design** |
| 単体テストケース設計 | 変更部分の単体テスト観点を設計 | 要件定義者／設計者 | - | IN | - | IN | - | - | OUT | - | - | - | - | - | **search spec** |
| SQL検証 | SQLの実現性・性能確認 | 要件定義者／設計者 | - | IN | IN | - | - | IN | - | - | - | - | OUT | - | **implement code** + **implement test** |
| 設計レビュー | 設計内容の確認・承認 | アーキテクト | - | IN | IN | IN | - | - | OUT | - | - | OUT | - | - | **review design** |

### 1.3 PG・UT

| アクティビティ | 説明 | 作業者 | 要件定義書 | 設計書 | 方式設計書 | 開発標準 | 開発ガイド | ソースコード | テスト仕様書/報告書 | テストデータ | 不具合票 | チェックリスト/レビュー結果 | 調査/検証結果 | 工数見積 | **Nabledge** |
|--------------|------|--------|-----------|--------|----------|---------|----------|------------|-----------------|------------|---------|----------------------|--------------|---------|------------|
| 環境構築 | 開発環境のセットアップ | アーキテクト | - | - | IN | - | IN | - | - | - | - | - | - | - | **design environment** |
| 既存コード理解 | 変更対象の既存コードの処理フローを理解 | アプリケーションエンジニア | - | IN | IN | IN | IN | IN | - | - | - | - | - | - | **search spec** + **search pattern** |
| 影響範囲分析 | 変更により影響を受ける他の機能・コードを特定 | アプリケーションエンジニア | - | IN | IN | IN | IN | IN | - | - | - | - | OUT | - | **investigate impact** |
| テストデータ作成 | 単体テスト用のテストデータ作成 | データアナリスト | - | IN | - | - | - | - | IN | OUT | - | - | - | - | 対象外: PJ業務知識依存 |
| コード実装 | 設計に基づいて変更コードを実装 | アプリケーションエンジニア | - | IN | IN | IN | - | IN/OUT | - | - | - | IN/OUT | - | - | **implement code** + **implement config** |
| パターン踏襲実装 | 既存コードのパターンに合わせて実装 | アプリケーションエンジニア | - | IN | IN | IN | - | IN/OUT | - | - | - | IN/OUT | - | - | **implement code** + **search pattern** |
| クラス単体テスト作成 | テストコードを作成 | アプリケーションエンジニア | - | IN | - | IN | - | IN/OUT | IN | - | - | IN/OUT | - | - | **implement test** |
| クラス単体テスト実施 | テストを実行し結果を確認 | アプリケーションエンジニア | - | - | - | - | IN | - | OUT | IN | - | - | - | - | 対象外: テスト実行 |
| 取引単体テスト実施 | 取引単位の打鍵テスト実施 | アプリケーションエンジニア | - | - | - | - | IN | - | OUT | IN | - | - | - | - | 対象外: テスト実行 |
| コードレビュー | コード確認・承認 | アーキテクト | - | IN | IN | IN | - | IN | - | - | - | OUT | - | - | **review code** + **review config** |

### 1.4 結合テスト

| アクティビティ | 説明 | 作業者 | 要件定義書 | 設計書 | 方式設計書 | 開発標準 | 開発ガイド | ソースコード | テスト仕様書/報告書 | テストデータ | 不具合票 | チェックリスト/レビュー結果 | 調査/検証結果 | 工数見積 | **Nabledge** |
|--------------|------|--------|-----------|--------|----------|---------|----------|------------|-----------------|------------|---------|----------------------|--------------|---------|------------|
| テスト環境構築 | テスト環境のセットアップ、デプロイ | アーキテクト | - | - | IN | - | IN | IN | - | - | - | - | - | - | **design environment** |
| 結合テストケース作成 | 機能間連携のテストケース作成 | 要件定義者／設計者 | IN | IN | - | IN | - | - | OUT | - | - | - | - | - | **search spec** |
| リグレッションテスト観点抽出 | 既存機能への影響を確認するテスト観点を抽出 | 要件定義者／設計者 | IN | IN | IN | IN | - | IN | OUT | - | - | - | - | - | **investigate impact** |
| 結合テスト実行 | テストを実行 | 要件定義者／設計者 | - | - | - | - | IN | - | IN/OUT | IN | - | - | - | - | 対象外: テスト実行 |
| 不具合調査 | テスト失敗時の原因特定(コード不具合、IF不整合、データ連携ミス等) | アプリケーションエンジニア | - | - | IN | IN | IN | IN | IN | - | OUT | - | - | - | **investigate failure** |
| | 〃 | 要件定義者／設計者 | - | IN | - | - | - | IN | IN | - | OUT | - | - | - | **investigate failure** |

### 1.5 システムテスト

| アクティビティ | 説明 | 作業者 | 要件定義書 | 設計書 | 方式設計書 | 開発標準 | 開発ガイド | ソースコード | テスト仕様書/報告書 | テストデータ | 不具合票 | チェックリスト/レビュー結果 | 調査/検証結果 | 工数見積 | **Nabledge** |
|--------------|------|--------|-----------|--------|----------|---------|----------|------------|-----------------|------------|---------|----------------------|--------------|---------|------------|
| システムテストケース作成 | 業務フロー全体のテストケース作成 | 要件定義者／設計者 | IN | IN | - | IN | - | - | OUT | - | - | - | - | - | **search spec** |
| システムテスト実行 | テストを実行 | 要件定義者／設計者 | - | - | - | - | IN | - | IN/OUT | IN | - | - | - | - | 対象外: テスト実行 |
| 性能テスト | 処理時間・スループットの確認、ボトルネック特定 | アーキテクト | IN | IN | IN | - | - | IN | IN/OUT | - | - | - | OUT | - | **investigate performance** |
| 不具合調査 | テスト失敗時の原因特定 | アプリケーションエンジニア | - | - | IN | IN | IN | IN | IN | - | OUT | - | - | - | **investigate failure** |
| | 〃 | 要件定義者／設計者 | - | IN | - | - | - | IN | IN | - | OUT | - | - | - | **investigate failure** |

---

## 2. Foundation: Artifacts and Roles

### 2.1 成果物分類

| 分類 | 含まれる成果物 |
|------|--------------|
| **1. 要件定義書** | 変更要求仕様書 |
| **2. 設計書** | システム機能設計書、テーブル定義書 |
| **3. 方式設計書** | 基盤設計、アーキテクチャ設計 |
| **4. 開発標準** | コーディング規約、UI標準、テスト標準 |
| **5. 開発ガイド** | プロジェクト用開発ガイド |
| **6. ソースコード** | Java/JSP/SQL、テストコード |
| **7. テスト仕様書/報告書** | テストケース、テスト結果、性能テスト結果 |
| **8. テストデータ** | 共通テストデータ、テストケース用データ |
| **9. 不具合票** | 障害票、設計修正指示 |
| **10. チェックリスト/レビュー結果** | レビューチェックリスト、セルフチェックリスト、レビュー指摘事項 |
| **11. 調査/検証結果** | 影響範囲調査書、技術検証結果、SQL検証結果、性能改善案 |
| **12. 工数見積** | 見積データ、見積書 |

### 2.2 ロール定義

| ロール | 担当アクティビティ概要 |
|--------|---------------------|
| **アーキテクト** | 技術検証、基盤設計、開発標準策定、環境構築、アーキテクチャレビュー |
| **要件定義者／設計者** | 要求分析、機能設計(画面・バッチ・Webサービス等)、テストケース設計 |
| **データモデラー** | データ定義、DB設計(論理・物理) |
| **データアナリスト** | データパターン洗い出し、テストデータ作成 |
| **アプリケーションエンジニア** | アプリ実装、単体テスト作成・実施、障害調査 |

---

## 3. Nabledge Commands

| command | subcommand | description | IN | OUT |
|---------|------------|---------|-----|------|
| **search** | spec | Nablarchの仕様・API・制約を回答 | フリーフォーマット | 回答 + 根拠 |
| | pattern | Nablarchの推奨実装パターンを提示 | フリーフォーマット | パターン + 実装例 |
| | migration | バージョン間の差分・移行影響を回答 | フリーフォーマット | 変更点 + 影響 + 手順 |
| **investigate** | impact | 変更による技術的な影響範囲を分析 | 設計書, 方式設計書, ソースコード | 調査/検証結果 |
| | feasibility | 要件の技術的実現可能性を検証 | 要件定義書, 方式設計書, ソースコード | 調査/検証結果 |
| | failure | 障害のFW起因/実装起因を切り分け | ソースコード, テスト仕様書/報告書 | 不具合票 |
| | performance | 性能問題のFW設定起因を特定 | ソースコード, テスト仕様書/報告書 | 調査/検証結果 |
| **design** | architecture | ハンドラキュー構成・入出力パターンの選定案を提示 | 要件定義書, 方式設計書 | 方式設計書(ドラフト) |
| | draft | Nablarch利用部分の機能設計書(ドラフト)を作成 | 要件定義書, 方式設計書, 開発標準 | 設計書(ドラフト) |
| | environment | プロジェクト開発環境の初期構成(ドラフト)を生成 | 方式設計書, 開発標準, 開発ガイド | ソースコード(ドラフト) |
| **implement** | code | 設計書に基づくソースコードを生成 | 設計書, 方式設計書, 開発標準, ソースコード | ソースコード |
| | config | コンポーネント定義XMLを生成 | 方式設計書, ソースコード | ソースコード |
| | test | NTFテストクラス・テストデータ雛形を生成 | 設計書, 開発標準, ソースコード | テスト仕様書/報告書, テストデータ |
| **review** | design | 設計書のFW利用方法を検証 | 設計書, 方式設計書, 開発標準 | チェックリスト/レビュー結果 |
| | code | ソースコードのNablarch規約準拠を検証 | 開発標準, ソースコード | チェックリスト/レビュー結果 |
| | config | コンポーネント設定の妥当性を検証 | 方式設計書, ソースコード | チェックリスト/レビュー結果 |
