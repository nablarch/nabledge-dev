# PR スキル使用例

このドキュメントでは、prスキルの実際の使用例を示します。

## 基本的な使い方

### 1. PR作成

**最もシンプルな使用法**:
```
/pr create
```

または単に:
```
PR作って
```

以下のことが自動的に実行されます:
1. カレントブランチの確認
2. コミット履歴の分析
3. PRタイトルと説明の生成
4. リモートへのプッシュ（必要な場合）
5. PRの作成

**実行例**:
```
## PR作成完了

**PR**: https://github.com/owner/repo/pull/123
**ブランチ**: feature/add-user-auth → main
**タイトル**: feat: ユーザー認証機能を追加

レビュアーにレビューを依頼してください。
```

### 2. レビュー対応

**PR番号を指定**:
```
/pr resolve 123
```

**PR番号を省略（カレントブランチから自動検索）**:
```
/pr resolve
```

または単に:
```
レビュー対応して
```

以下のことが自動的に実行されます:
1. PRのレビューコメントを取得
2. 各コメントを分析し、修正内容を判断
3. ファイルを修正
4. コミット・プッシュ
5. レビュアーにリプライ

**実行例**:
```
## PRレビュー対応完了

**PR**: https://github.com/owner/repo/pull/123

### 結果
- 修正してリプライ: 3件
- 質問してリプライ: 1件
- スキップ: 0件

レビュアーによる確認をお願いします。
```

### 3. マージ

**PR番号を指定**:
```
/pr merge 123
```

**PR番号を省略（カレントブランチから自動検索）**:
```
/pr merge
```

または単に:
```
マージして
```

以下のことが自動的に実行されます:
1. PRの状態確認
2. ユーザーに最終確認
3. PRのマージ
4. リモートブランチの削除
5. ローカルブランチの削除
6. mainブランチへの切り替えと更新

**実行例**:
```
## マージ完了

**PR**: https://github.com/owner/repo/pull/123
**ブランチ**: feature/add-user-auth → main

### 実行内容
- PRをマージしました
- リモートブランチ 'feature/add-user-auth' を削除しました
- ローカルブランチ 'feature/add-user-auth' を削除しました
- ブランチを 'main' に切り替えました
- 最新のコードを取得しました

お疲れ様でした。
```

## 高度な使い方

### モード選択（引数なし）

```
/pr
```

カレントブランチの状態に応じて、推奨される操作を提示します:

**PRが存在する場合**:
```
どのPR操作を実行しますか？

1. レビュー対応 (resolve) (推奨)
2. PR作成 (create)
3. マージ (merge)
```

**PRが存在しない場合**:
```
どのPR操作を実行しますか？

1. PR作成 (create) (推奨)
2. レビュー対応 (resolve)
3. マージ (merge)
```

### 数値のみでresolveモード

```
/pr 123
```

PR番号を指定すると、自動的にresolveモードで実行されます。

## 実際のワークフロー

### ワークフロー例1: 新機能の追加

```
# 1. ブランチ作成・作業
/git branch-create feature/add-payment

# 2. コード編集
（ファイルを編集）

# 3. コミット
/git commit

# 4. PR作成
/pr create

# 5. レビュー対応
/pr resolve

# 6. マージ
/pr merge
```

### ワークフロー例2: バグ修正

```
# 1. ブランチ作成・作業
/git branch-create fix/login-timeout

# 2. コード修正
（ファイルを編集）

# 3. コミット・PR作成
/git commit
/pr create

# 4. レビュー後にマージ
/pr merge
```

## エラーケースの対処

### mainブランチから誤ってPR作成しようとした場合

```
/pr create

エラー: mainブランチからPRは作成できません。
feature/issueブランチを作成してから実行してください。
```

対処:
```
/git branch-create feature/my-feature
/pr create
```

### コミットがない状態でPR作成しようとした場合

```
/pr create

エラー: mainからの新しいコミットがありません。
変更をコミットしてから実行してください。
```

対処:
```
/git commit
/pr create
```

### PRが見つからない場合

```
/pr resolve

エラー: カレントブランチのPRが見つかりませんでした。
PR番号を指定するか、正しいブランチに切り替えてください。
```

対処:
```
/pr resolve 123
```

## Tips

1. **自然言語で呼び出し**: `/pr create`の代わりに「PR作って」でもOK
2. **PR番号の省略**: カレントブランチから自動検索されるため、ほとんどの場合PR番号は不要
3. **レビュー対応の自動化**: 明確な修正指示は自動で対応し、不明点のみ質問
4. **一括クリーンアップ**: マージ時にリモート・ローカルブランチを自動削除
