# 使用例

## 基本的な使用方法

### 例1: 通常の使用 (Issueが複数ある場合)

```bash
/op
```

**システムの動作:**

1. 今日クローズしたIssueを取得
2. ユーザーに質問: "今日の発見は何ですか？"
3. ユーザーに質問: "その他共有したいことはありますか？"
4. 振り返りを自動生成
5. Teamsメッセージを出力

**出力例:**

```
## アウトプット

- #68: 開発者として、1日の終わりに翌朝の朝会用メッセージを自動生成したい。なぜなら効率的に進捗を共有するため (https://github.com/tie303177/nabledge-dev/issues/68)
- #67: バグ修正: ログイン時のセッションタイムアウト問題 (https://github.com/tie303177/nabledge-dev/issues/67)
- #65: 新機能: ユーザー認証機能の追加 (https://github.com/tie303177/nabledge-dev/issues/65)

## 発見

Task toolの使い方について理解が深まりました。特にサブエージェントを使った
ワークフロー分離のパターンが効果的だと感じました。また、AskUserQuestion tool
を使ったインタラクティブな入力収集の実装方法も学びました。

## 振り返り

今日は朝会用メッセージ生成スキルの実装を完了し、認証機能のバグ修正も行いました。
これにより毎日の振り返り作成が自動化され、開発者は本来の開発作業に集中できるよう
になります。また、セキュリティの改善により、ユーザーに安全なサービスを提供できる
基盤が整いました。今後は他の定型作業の自動化にも展開できる見込みです。

## その他

明日は新しいスキルのテストを実施する予定です。
```

---

### 例2: Issueが0件の場合

```bash
/op
```

**出力例:**

```
## アウトプット

今日クローズしたIssueはありません

## 発見

コードレビューのプロセスを改善する方法について議論しました。
レビュー時間を短縮しつつ品質を保つバランスが重要だと感じました。

## 振り返り

今日は直接的なコード変更はありませんでしたが、チームのプロセス改善について
有意義な議論ができました。特にレビューフローの最適化は、今後の開発効率向上に
大きく寄与すると考えられます。明日からは新しいフローを試験的に導入し、効果を
測定していく予定です。

## その他

なし
```

---

### 例3: 「その他」が空の場合

ユーザーが「その他」の質問に対して「なし」と回答した場合:

```
## その他

なし
```

---

## ユースケース別の使用例

### ケース1: 機能開発が完了した日

**クローズしたIssue:**
- #50: 新機能: CSVエクスポート機能の追加
- #49: 新機能: データフィルタリング機能の追加

**発見:**
```
CSVエクスポート機能の実装で、ストリーミング処理を使うことで
大量データでもメモリ効率よく処理できることを学びました。
```

**振り返り (自動生成):**
```
今日はCSVエクスポートとデータフィルタリング機能を完成させました。
これによりユーザーは必要なデータを効率的に抽出・活用できるようになり、
データ分析の生産性が大幅に向上します。特にストリーミング処理の導入により、
大規模データでも安定した動作が保証されました。
```

---

### ケース2: バグ修正が中心だった日

**クローズしたIssue:**
- #45: バグ修正: メール送信の失敗時にエラーが表示されない
- #44: バグ修正: ページネーションが正しく動作しない
- #43: バグ修正: 日本語入力時の文字化け問題

**発見:**
```
バグの根本原因を調査する際、ログを詳細に追うことの重要性を再認識しました。
また、テストケースの不足がバグ発生の一因だったため、テスト強化が必要です。
```

**振り返り (自動生成):**
```
今日は3件のバグ修正を完了し、ユーザー体験の改善に貢献しました。
特にメール送信エラーの問題は顧客からの報告が多かった課題であり、
解決により信頼性が向上します。また、今回の経験から自動テストの
カバレッジ拡充が次の優先事項として明確になりました。
```

---

### ケース3: リファクタリングと改善が中心だった日

**クローズしたIssue:**
- #38: リファクタリング: API層のエラーハンドリング統一
- #37: 改善: データベースクエリのパフォーマンス最適化

**発見:**
```
リファクタリング前に既存のテストをすべて通しておくことで、
安全に変更を進められることを実感しました。また、パフォーマンス
改善では実測データに基づく意思決定が重要だと学びました。
```

**振り返り (自動生成):**
```
今日はAPI層のエラーハンドリングを統一し、データベースパフォーマンスを
改善しました。これにより保守性が向上し、今後の機能追加が容易になります。
また、クエリ最適化により応答速度が30%向上し、ユーザー体験の改善にも
貢献できました。コードの品質向上は長期的な開発効率に直結します。
```

---

### ケース4: ドキュメント整備が中心だった日

**クローズしたIssue:**
- #30: ドキュメント: APIリファレンスの追加
- #29: ドキュメント: セットアップガイドの改善

**発見:**
```
ドキュメントを書く過程で、APIの設計に曖昧な点があることに気づきました。
ドキュメント作成は設計の見直しにも有効だと感じました。
```

**振り返り (自動生成):**
```
今日はAPIリファレンスとセットアップガイドを整備しました。
これにより新しいメンバーのオンボーディングが円滑になり、
外部開発者もAPIを活用しやすくなります。また、ドキュメント作成を
通じて設計の改善点も発見でき、今後のAPI改善に活かせます。
```

---

## トラブルシューティング

### エラー: gh CLIが認証されていない

**症状:**
```
Error: gh: To get started with GitHub CLI, please run: gh auth login
```

**対応:**
```bash
gh auth login
```

ブラウザで認証を完了してから、再度 `/op` を実行してください。

---

### エラー: GitHubリポジトリではない

**症状:**
```
エラー: GitHubリポジトリが見つかりません。
```

**対応:**
1. 現在のディレクトリがGitリポジトリか確認:
   ```bash
   git status
   ```
2. GitHubリポジトリのディレクトリに移動してから実行

---

### Issueが予想より少ない

**原因:**
- Issue検索は `closed:>=今日の日付` でフィルタリングしています
- 今日以前にクローズしたIssueは含まれません

**確認方法:**
```bash
# 今日の日付を確認
date -I

# 手動でIssueを確認
gh issue list --state closed --limit 10
```

---

## ベストプラクティス

### タイミング

**推奨:** 1日の作業終了時に実行
- Issueをクローズした直後
- その日の発見が記憶に新しいとき

### 発見の書き方

**良い例:**
```
Task toolの使い方について理解が深まりました。特にサブエージェントを使った
ワークフロー分離のパターンが効果的だと感じました。
```

**改善が必要な例:**
```
いろいろ学びました。
```
→ 具体的に何を学んだか書くとより有益

### その他の書き方

**良い例:**
```
明日は新機能のレビューミーティングがあります。
チームメンバーの意見を事前に確認しておく必要があります。
```

**改善が必要な例:**
```
特になし
```
→ 本当に共有事項がなければ「なし」でOK

---

## 高度な使用法

### 複数リポジトリでの使用

異なるリポジトリで作業している場合、各リポジトリのディレクトリで個別に実行:

```bash
# プロジェクトAで実行
cd /path/to/project-a
/op

# プロジェクトBで実行
cd /path/to/project-b
/op
```

それぞれのリポジトリの成果が独立して集計されます。

### 週次レビューへの活用

毎日生成されたメッセージを保存しておくことで、週次レビューの材料として活用できます。

```bash
# 出力をファイルに保存 (手動でコピー)
/op > ~/weekly-reports/2026-02-20.md
```

---

## 関連スキル

- `/git commit` - コミット作成
- `/pr create` - プルリクエスト作成
- `/hi` - Issue → PR の完全ワークフロー
