{
  "id": "release-6u3",
  "title": "リリースノート 6u3",
  "version": "6u3",
  "official_doc_urls": [
    "https://nablarch.github.io/docs/6u3/doc/releases/nablarch6u3-releasenote.xlsx"
  ],
  "index": [
    {
      "id": "overview",
      "hints": [
        "6u3",
        "リリース",
        "6u2",
        "変更点"
      ]
    },
    {
      "id": "changes",
      "hints": [
        "変更内容",
        "リリースノート",
        "不具合修正",
        "機能追加",
        "OpenAPI",
        "BeanUtil",
        "JSON",
        "バリデーション",
        "APIドキュメント"
      ]
    }
  ],
  "sections": {
    "overview": {
      "summary": "Nablarch 6u3のリリースノート。6u2からの変更点を記載",
      "highlights": [
        "OpenAPI対応に伴うRESTful Webサービスの機能強化（親クラス・インタフェースでのリソース定義対応）",
        "EntityResponseに型パラメータ追加",
        "マルチパートリクエスト用のBodyConverter追加",
        "BeanUtilのDate and Time APIサポート拡充（OffsetDateTime追加）",
        "JSON読み取り不具合の修正（JSON区切り文字のみの値の解析）"
      ]
    },
    "changes": [
      {
        "no": 1,
        "category": "RESTfulウェブサービス",
        "type": "変更",
        "title": "親クラス・インタフェースでのリソース定義に対応\n(No.24.OpenAPI対応に伴う変更)",
        "description": "OpenAPIドキュメントから生成したインタフェースを使用してアクションクラスを実装できるように、インターフェースや親クラスでのリソース定義を引き継ぐように対応しました。\n\n@PathなどのJakarta RESTful Web Servicesのアノテーションを使ってアクションクラスを実装している場合に、以下の条件でアクションクラスが実装しているインターフェースや親クラスのリソース定義を引き継ぎます。\n　・アクションクラスが親クラスを継承またはインターフェースを実装している\n　・親クラスまたはインターフェースに@Pathアノテーションが注釈されている\n　・親クラスまたはインターフェースにHTTPメソッドが定義されている\n\nまた、本対応にはルーティングアダプタも修正する必要があったため、合わせて対応しました。",
        "module": "nablarch-fw-jaxrs 2.2.0\nnablarch-router-adaptor 2.2.0",
        "affected_version": "",
        "impact": "なし",
        "impact_detail": "",
        "reference": "https://nablarch.github.io/docs/6u3/doc/application_framework/application_framework/web_service/rest/feature_details/resource_signature.html",
        "jira": "NAB-618"
      },
      {
        "no": 2,
        "category": "RESTfulウェブサービス",
        "type": "変更",
        "title": "EntityResponseの型パラメータ追加\n(No.24.OpenAPI対応に伴う変更)",
        "description": "OpenAPIドキュメントとのマッピングに対応するため、EntityResponseに型パラメータを追加しました。\nこれにより、どのようなエンティティの型をレスポンスとしているかをより明確に表現できるようになりました。",
        "module": "nablarch-fw-jaxrs 2.2.0",
        "affected_version": "",
        "impact": "あり(開発)",
        "impact_detail": "すでにEntityResponseを使用している個所については型を指定していない状態になるため、コンパイル時に以下のメッセージが出力されるようになります。また、設定によってはIDEで同様の警告が出力されるようになります。\n\n[INFO] (該当クラス)の操作は、未チェックまたは安全ではありません。\n\n解消しなくても動作に影響はありませんが、EntityResponseを使用している個所で明示的に型を指定すると、メッセージおよび警告は解消されます。\n",
        "reference": "https://nablarch.github.io/docs/6u3/doc/application_framework/application_framework/web_service/rest/feature_details/resource_signature.html",
        "jira": "NAB-619"
      },
      {
        "no": 3,
        "category": "BeanUtil",
        "type": "変更",
        "title": "Date and Time APIサポート拡充\n(No.24.OpenAPI対応に伴う変更)",
        "description": "OpenAPIドキュメントとのマッピングに対応するため、Date and Time APIのサポートを拡充し、OffsetDateTimeのサポートを追加しました。\n",
        "module": "nablarch-core-beans 2.3.0",
        "affected_version": "",
        "impact": "なし",
        "impact_detail": "",
        "reference": "https://nablarch.github.io/docs/6u3/doc/application_framework/application_framework/libraries/bean_util.html",
        "jira": "NAB-620"
      },
      {
        "no": 4,
        "category": "RESTfulウェブサービス",
        "type": "変更",
        "title": "マルチパート用のBodyConverter追加\n(No.24.OpenAPI対応に伴う変更)",
        "description": "OpenAPIドキュメントとのマッピングに対応するため、Content-Typeがmultipart/form-dataのリクエストに対応するBodyConverterを追加しました。\n",
        "module": "nablarch-fw-jaxrs 2.2.0",
        "affected_version": "",
        "impact": "なし",
        "impact_detail": "",
        "reference": "https://nablarch.github.io/docs/6u3/doc/application_framework/application_framework/web_service/rest/feature_details/resource_signature.html",
        "jira": "NAB-621"
      },
      {
        "no": 5,
        "category": "BeanUtil",
        "type": "変更",
        "title": "MapからBeanへ移送するメソッドのパフォーマンス改善",
        "description": "MapからBeanへ移送する際、ネストしたオブジェクト数が多い場合に処理が遅くなる事象が発生していたので、修正しました。\n",
        "module": "nablarch-core-beans 2.3.0",
        "affected_version": "",
        "impact": "なし",
        "impact_detail": "",
        "reference": "https://nablarch.github.io/docs/6u3/doc/application_framework/application_framework/libraries/bean_util.html",
        "jira": "NAB-634"
      },
      {
        "no": 6,
        "category": "汎用データフォーマット",
        "type": "不具合",
        "title": "JSONの読み取りに失敗する問題を修正",
        "description": "JSON内に含まれる値（\"\"で囲われた項目）がJSON構文で意味を持つ区切り文字（:、[、{、, の4つ）のみで、かつその後にデータが続く場合、値とJSON構文の区切り文字の区別ができずに失敗していました。\n\n①NGになる例（\":\"の後にデータが続く）：\n  {\"key1\": \":\", \"key2\": \"value2\"}\n\n②OKになる例（\":\"の後にデータが続かない）：\n  {\"key1\": \":\"}\n\nNGになっていた例も、正常に値として解析できるように修正しました。\n",
        "module": "nablarch-core-dataformat 2.0.3",
        "affected_version": "1.3.1",
        "impact": "あり(本番)",
        "impact_detail": "概要の①のようにJSONの区切り文字のみが値になるデータを解析できるようになります。\n本来は値として解析できることが正しい挙動であるため影響が無い想定ですが、もしこのようなJSONを読み込めるようになることでシステム影響がある場合、値の確認をして受け入れないようにするなどの修正を行ってください。",
        "reference": "https://nablarch.github.io/docs/6u3/doc/application_framework/application_framework/libraries/data_io/data_format.html",
        "jira": "NAB-639"
      },
      {
        "no": 7,
        "category": "Bean Validation",
        "type": "変更",
        "title": "BeanValidationStrategyのバリデーション処理をカスタマイズできるように修正",
        "description": "BeanValidationStrategyをカスタマイズしやすくなるよう、公開APIを見直しました。\nそれに伴い、バリデーションエラーのメッセージをソートするsortMessagesメソッドをオーバーライド可能にするため、static修飾子を除去しました。\n",
        "module": "nablarch-fw-web 2.3.0",
        "affected_version": "",
        "impact": "なし",
        "impact_detail": "",
        "reference": "https://nablarch.github.io/docs/6u3/doc/application_framework/application_framework/libraries/validation/bean_validation.html",
        "jira": "NAB-640"
      },
      {
        "no": 8,
        "category": "公開API",
        "type": "変更",
        "title": "公開APIの追加",
        "description": "解説書で継承を案内しているAPIの中で公開APIになっていないものがあったため、公開APIを追加しました。\n",
        "module": "nablarch-common-dao 2.3.0\nnablarch-common-databind 2.1.0",
        "affected_version": "",
        "impact": "なし",
        "impact_detail": "",
        "reference": "",
        "jira": "NAB-641"
      },
      {
        "no": 9,
        "category": "Nablarchバッチアプリケーション",
        "type": "変更",
        "title": "ResumeDataReaderのJavadoc改善",
        "description": "ResumeDataReaderが内部的に使用するResumePointManagerは初期化が必要ですが、\nこの点をResumeDataReaderに関する説明から読み取りづらかったため、ResumeDataReaderのJavadocに追記しました。\n",
        "module": "nablarch-fw-batch 2.0.1",
        "affected_version": "",
        "impact": "なし",
        "impact_detail": "",
        "reference": "https://nablarch.github.io/docs/6u3/javadoc/nablarch/fw/reader/ResumeDataReader.html",
        "jira": "NAB-629"
      },
      {
        "no": 10,
        "category": "サロゲートキーの採番",
        "type": "変更",
        "title": "TableIdGeneratorのJavadoc改善",
        "description": "採番の際に独立したトランザクションを用いるFastTableIdGeneratorは初期化が必要ですが、Javadoc上でそれがわからなかったため、その旨を追記しました。\nまた類似のコンポーネントであるTableIdGeneratorのJavadocにも、記述を合わせるため同様の更新を行っています。\n",
        "module": "nablarch-common-idgenerator-jdbc 2.0.1",
        "affected_version": "",
        "impact": "なし",
        "impact_detail": "",
        "reference": "https://nablarch.github.io/docs/6u3/javadoc/nablarch/common/idgenerator/FastTableIdGenerator.html\n",
        "jira": "NAB-629"
      },
      {
        "no": 11,
        "category": "汎用ユーティリティ",
        "type": "変更",
        "title": "Base64UtilのJavadoc・解説書改善",
        "description": "Base64UtilはRFC4648の「4. Base 64 Encoding」に準拠していますが、Javadoc上で明記できていなかったため、その旨を追記しました。\n\nまた、Java8以降ではBase64エンコーディングを行う標準APIが提供されており、Base64Utilを使用せずとも同様の処理を行えます。\nBase64Utilを使用する必要性が小さくなったため、Javadocで標準APIを案内し、Base64Utilは後方互換性のための位置付けとしました。\nそのため、Base64Utilは後方互換のために存在していることを解説書に追記しました。\n※現在Base64Utilを使用している個所を標準APIに置換する必要はありません。\n",
        "module": "nablarch-core-2.2.1",
        "affected_version": "",
        "impact": "なし",
        "impact_detail": "",
        "reference": "https://nablarch.github.io/docs/6u3/javadoc/nablarch/core/util/Base64Util.html",
        "jira": "NAB-626"
      },
      {
        "no": 12,
        "category": "公開API",
        "type": "変更",
        "title": "PublishedアノテーションのJavadoc改善",
        "description": "PublishedアノテーションのJavadocで、オーバーライド可能なメソッドは公開APIとしていることについて追記しました。",
        "module": "nablarch-core-2.2.1",
        "affected_version": "",
        "impact": "なし",
        "impact_detail": "",
        "reference": "https://nablarch.github.io/docs/6u3/javadoc/nablarch/core/util/annotation/Published.html",
        "jira": "NAB-640"
      },
      {
        "no": 13,
        "category": "コンポーネントの初期化",
        "type": "変更",
        "title": "初期化が必要なコンポーネントに対する説明の改善",
        "description": "コンポーネントとして使用することを想定して提供しているクラスのうち、初期化が必要であるにも関わらず解説書への記載がないものがあったので、初期化が必要な旨や設定例を追記しました。\n\n・Nablarchが提供するライブラリ\n　・コード管理\n　・サロゲートキーの採番\n　・日付管理\n　・メール送信\n　・サービス提供可否チェック\n・Nablarchの提供する標準ハンドラ\n　・プロセス停止制御ハンドラ\n・アダプタ\n　・IBM MQアダプタ\n",
        "module": "nablarch-document 6u3",
        "affected_version": "",
        "impact": "なし",
        "impact_detail": "",
        "reference": "",
        "jira": "NAB-629"
      },
      {
        "no": 14,
        "category": "RESTfulウェブサービス",
        "type": "変更",
        "title": "マルチパートリクエストのサポート",
        "description": "No.4およびNo.19で対応したマルチパートリクエストのサポートを取り込み、マルチパートリクエストに対応しました。\n",
        "module": "nablarch-single-module-archetype 6u3",
        "affected_version": "",
        "impact": "なし",
        "impact_detail": "",
        "reference": "",
        "jira": "NAB-621"
      },
      {
        "no": 15,
        "category": "ウェブアプリケーション\nRESTfulウェブサービス",
        "type": "変更",
        "title": "Tomcatベースイメージの更新",
        "description": "10.1.33以前のApache Tomcatに脆弱性が検出されたため、ブランクプロジェクトのデフォルトのTomcatのベースイメージを以下に更新しました。\n\n　tomcat:10.1.34-jdk17-temurin\n",
        "module": "nablarch-single-module-archetype 6u3",
        "affected_version": "",
        "impact": "なし",
        "impact_detail": "",
        "reference": "https://nablarch.github.io/docs/6u3/doc/application_framework/application_framework/blank_project/setup_containerBlankProject/setup_ContainerWeb.html",
        "jira": "NAB-627"
      },
      {
        "no": 16,
        "category": "全般",
        "type": "変更",
        "title": "gsp-dba-maven-pluginのバージョン更新",
        "description": "以下のMavenプラグインを記載のバージョンに更新しました。\n・gsp-dba-maven-plugin：5.2.0\n",
        "module": "nablarch-single-module-archetype 6u3",
        "affected_version": "",
        "impact": "なし",
        "impact_detail": "",
        "reference": "",
        "jira": "NAB-636"
      },
      {
        "no": 17,
        "category": "全般",
        "type": "変更",
        "title": "使用不許可APIツールのバージョン更新",
        "description": "No.26の対応に伴い、使用不許可APIツールのバージョンを以下に更新しました。\n・nablarch-unpublished-api-checker 1.0.1\n",
        "module": "nablarch-single-module-archetype 6u3",
        "affected_version": "",
        "impact": "なし",
        "impact_detail": "",
        "reference": "",
        "jira": "NAB-630"
      },
      {
        "no": 18,
        "category": "Jakarta RESTful Web Servicesアダプタ",
        "type": "変更",
        "title": "Date and Time APIのサポート\n(No.24.OpenAPI対応に伴う変更)",
        "description": "OpenAPIドキュメントとのマッピングに対応するため、Jackson Java 8 Date/timeモジュールを追加してDate and Time APIを扱えるようになりました。\n\n※JaxRsHandlerListFactory を独自に実装している場合、バージョンアップだけでは本機能は使用できません。本機能を使用したい場合は、nablarch-jersey-adaptorおよびnablarch-resteasy-adaptorの実装を参考にしてください。\n",
        "module": "nablarch-jaxrs-adaptor 2.2.0\nnablarch-jersey-adaptor 2.2.0\nnablarch-resteasy-adaptor 2.2.0\nnablarch-jackson-adaptor 2.2.0",
        "affected_version": "",
        "impact": "なし",
        "impact_detail": "",
        "reference": "https://nablarch.github.io/docs/6u3/doc/application_framework/adaptors/jaxrs_adaptor.html",
        "jira": "NAB-620"
      },
      {
        "no": 19,
        "category": "Jakarta RESTful Web Servicesアダプタ",
        "type": "変更",
        "title": "マルチパートリクエストのサポート\n(No.24.OpenAPI対応に伴う変更)",
        "description": "No.4で追加したマルチパート用のBodyConverterをnablarch-jersey-adaptorおよびnablarch-resteasy-adaptorに追加しました。\n\n\n",
        "module": "nablarch-jaxrs-adaptor 2.2.0\nnablarch-jersey-adaptor 2.2.0\nnablarch-resteasy-adaptor 2.2.0\nnablarch-jackson-adaptor 2.2.0",
        "affected_version": "",
        "impact": "あり",
        "impact_detail": "6u2以前からのバージョンアップで本機能を使用する場合は、設定変更が必要になります。詳しくは「マルチパートリクエストのサポート対応」シートを参照してください。",
        "reference": "https://nablarch.github.io/docs/6u3/doc/application_framework/adaptors/jaxrs_adaptor.html",
        "jira": "NAB-621"
      },
      {
        "no": 20,
        "category": "ウェブアプリケーション (JSP)",
        "type": "変更",
        "title": "jQuery、Bootstrapのバージョンアップ",
        "description": "jQueryおよびjQeuryに依存していたライブラリのバージョンを以下の通り更新しました。\n・jQuery 3.7.1\n・jQuery UI 1.14\n・Bootstrap 5.3.3\nまた、Bootstrapのバージョンアップに伴ってMaterial Design for Bootstrapの使用を廃止し、画面デザインを調整しました。\n",
        "module": "nablarch-example-web 6u3",
        "affected_version": "-",
        "impact": "なし",
        "impact_detail": "",
        "reference": "https://nablarch.github.io/docs/6u3/doc/application_framework/application_framework/web/index.html",
        "jira": "NAB-616"
      },
      {
        "no": 21,
        "category": "RESTfulウェブサービス",
        "type": "変更",
        "title": "マルチパートリクエストのサポート\n(No.24.OpenAPI対応に伴う変更)",
        "description": "No.4およびNo.19で対応したnablarch-fw-jaxrsおよびnablarch-jaxrs-adaptorの変更内容を取り込み、マルチパートリクエストに対応しました。\n",
        "module": "nablarch-example-rest 6u3",
        "affected_version": "",
        "impact": "なし",
        "impact_detail": "",
        "reference": "",
        "jira": "NAB-621"
      },
      {
        "no": 22,
        "category": "全般",
        "type": "変更",
        "title": "gsp-dba-maven-pluginのバージョン更新",
        "description": "以下のMavenプラグインを記載のバージョンに更新しました。\n・gsp-dba-maven-plugin：5.2.0\n",
        "module": "nablarch-example-web  6u3\nnablarch-example-thymeleaf-web  6u3\nnablarch-example-rest  6u3\nnablarch-example-batch  6u3\nnablarch-example-batch-ee  6u3\nnablarch-example-http-messaging  6u3\nnablarch-example-http-messaging-send  6u3\nnablarch-example-db-queue  6u3\nnablarch-example-mom-delayed-receive  6u3\nnablarch-example-mom-delayed-send  6u3\nnablarch-example-mom-sync-receive  6u3\nnablarch-example-mom-sync-send-batch  6u3",
        "affected_version": "",
        "impact": "なし",
        "impact_detail": "",
        "reference": "",
        "jira": "NAB-636"
      },
      {
        "no": 23,
        "category": "検索結果の一覧表示",
        "type": "変更",
        "title": "タグファイルのスタイル適用設定修正",
        "description": "ページングの現在表示中のページ番号部分に対して、カスタムタグで指定したスタイルが適用されていなかったため、表示中かどうかに関わらず設定したCSSが適用されるように修正しました。\n",
        "module": "nablarch-biz-sample-all 3.1.0",
        "affected_version": "-",
        "impact": "なし",
        "impact_detail": "",
        "reference": "https://nablarch.github.io/docs/6u3/doc/biz_samples/03/index.html",
        "jira": "NAB-616"
      },
      {
        "no": 24,
        "category": "Nablarch OpenAPI Generator",
        "type": "追加",
        "title": "Nablarch OpenAPI Generatorのリリース",
        "description": "OpenAPIドキュメントからアプリケーションのコード生成をサポートするツールである Nablarch OpenAPI Generator をリリースしました。\n",
        "module": "nablarch-openapi-generator 1.0.0",
        "affected_version": "-",
        "impact": "なし",
        "impact_detail": "",
        "reference": "https://nablarch.github.io/docs/6u3/doc/development_tools/toolbox/NablarchOpenApiGenerator/NablarchOpenApiGenerator.html",
        "jira": "NAB-624"
      },
      {
        "no": 25,
        "category": "SQL Executor",
        "type": "変更",
        "title": "解説書の手順と実際のモジュールの構成差異を修正",
        "description": "ツールの提供状態として設定すべき項目に不足があり、また解説書で案内している設定ファイル名と実際のファイル名に乖離がありました。\nこのため解説書どおりに実行しても起動できないという問題が発生しており、解説書記載の手順で実行できるように設定ファイルの見直しを行いました。\n",
        "module": "sql-executor 1.3.1",
        "affected_version": "-",
        "impact": "なし",
        "impact_detail": "",
        "reference": "https://nablarch.github.io/docs/6u3/doc/development_tools/toolbox/SqlExecutor/SqlExecutor.html",
        "jira": "NAB-637"
      },
      {
        "no": 26,
        "category": "使用不許可APIチェックツール",
        "type": "不具合",
        "title": "Java21でjava.lang.Objectのメソッドが許可できない場合がある問題に対応",
        "description": "Java21でバイトコードが変わったことにより、インタフェースからjava.lang.Objectのメソッドを呼んでいる場合、設定ファイルで指定しても許可されないという不具合があったため対応しました。\n\n例) \n■使用不許可APIツールの設定ファイル\njava.lang.Object\n\n■解析対象のjavaファイル\n// toStringメソッドは本来許可されるはずだが不許可になる\nMap<String, String> headers = request.headers();\nheaders.toString();\n",
        "module": "nablarch-unpublished-api-checker 1.0.1",
        "affected_version": "1.0.0",
        "impact": "なし",
        "impact_detail": "",
        "reference": "https://nablarch.github.io/docs/LATEST/doc/development_tools/java_static_analysis/index.html#id6",
        "jira": "NAB-630"
      }
    ]
  }
}
