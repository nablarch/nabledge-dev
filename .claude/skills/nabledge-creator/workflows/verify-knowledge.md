# verify-knowledge ワークフロー

生成された知識ファイルの品質を検証する。生成セッションとは別のセッションで実行する。

## なぜ別セッションか

生成セッションでは「何を入れるべきか」という判断を行う。検証セッションでは「何が抜けているか」という判断を行う。同じセッションで両方やると、生成時の判断に引きずられて見落としが発生する。

## ワークフロー手順

### Step 1: チェックリストを読む

`.claude/skills/nabledge-6/knowledge/{file}.checklist.md`を読め。このファイルには以下が記載されている：

- rstから抽出されたヒント候補（クラス名、プロパティ名、アノテーション名）
- rstから抽出された仕様項目（ディレクティブ、例外クラス、h2見出し）
- 想定質問（タイトルとヒントから自動生成）

### Step 2: ヒント候補の確認

チェックリストの「ヒント候補」セクションを見よ。「JSON hints内」が「なし」の項目を重点的に確認せよ。

**判断基準**：

- L2/L3キーワードとして価値があるか？
- ユーザーが検索で使う可能性があるか？
- 重要度が低い内部実装クラス名は不要

確認結果を「判定」列に記入せよ：

- `追加` - JSON index配列に追加すべき
- `不要` - 追加不要（理由を簡潔に）
- `OK` - 既に含まれている

### Step 3: 仕様項目の確認

チェックリストの「仕様項目」セクションを見よ。各項目について、rstの該当行を読み、JSONのいずれかのセクションに内容が反映されているか確認せよ。

**確認対象**：

- **プロパティ**: JSON setup/configuration内に存在するか
- **ディレクティブ**: notes/warnings/その他のセクションに反映されているか
- **例外クラス**: JSON errors内に存在するか

確認結果を「判定」列に記入せよ：

- `OK` - 反映済み（セクションIDを記載）
- `追加` - 追加すべき（セクションIDを記載）
- `不要` - 追加不要（理由を簡潔に）

### Step 4: 想定質問でテスト

チェックリストの「想定質問」セクションを見よ。各質問について、以下を確認せよ：

1. その質問で検索した際、このJSONファイルがヒットするか？
   - ファイルレベルヒント（index.toon）でヒットするか
   - セクションレベルヒント（JSON index配列）でヒットするか

2. ヒットした場合、関連セクションに必要な情報が含まれているか？

結果を記入せよ：

- `ファイルヒット: YES/NO`
- `セクションヒット: YES/NO (セクションID)`
- `情報十分: YES/NO (不足内容)`

### Step 5: 修正実施

Step 2-4で「追加」と判定した項目について、JSONファイルを修正せよ。

修正後、以下のコマンドを実行せよ：

```bash
python scripts/validate-knowledge.py .claude/skills/nabledge-6/knowledge/{file}.json
python scripts/convert-knowledge-md.py .claude/skills/nabledge-6/knowledge/ --output-dir .claude/skills/nabledge-6/docs/
```

### Step 6: 検証結果の記録

チェックリストファイルの末尾に検証結果を追記せよ：

```markdown
---

## 検証結果

**検証日**: YYYY-MM-DD
**検証者**: AI Agent

### 修正内容

#### ヒント追加
- セクションID `xxx`: 追加したヒント（理由）

#### 仕様項目追加
- セクションID `xxx`: 追加した内容（理由）

### 品質評価

- ヒント品質: [良好/要改善]
- 仕様網羅性: [良好/要改善]
- 検索適合性: [良好/要改善]

### コメント

[自由記述]
```
